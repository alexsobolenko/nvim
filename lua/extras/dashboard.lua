-- dashboard extras

local M = {}
local icons = require("extras.icons")
local utils = require("extras.utils")
local dashboard = require("alpha.themes.dashboard")

local headers = {
    {
        "",
        "",
        "",
        "",
        "",
        "ooooo      ooo oooooooooooo   .oooooo.   oooooo     oooo ooooo ooo        ooooo",
        "`888b.     `8' `888'     `8  d8P'  `Y8b   `888.     .8'  `888' `88.       .888'",
        " 8 `88b.    8   888         888      888   `888.   .8'    888   888b     d'888 ",
        " 8   `88b.  8   888oooo8    888      888    `888. .8'     888   8 Y88. .P  888 ",
        " 8     `88b.8   888    '    888      888     `888.8'      888   8  `888'   888 ",
        " 8       `888   888       o `88b    d88'      `888'       888   8    Y     888 ",
        "o8o        `8  o888ooooood8  `Y8bood8P'        `8'       o888o o8o        o888o",
        "",
        "",
        "",
        "",
        "",
    },
    {
        "",
        "",
        "",
        "",
        "      ___           ___           ___           ___                       ___     ",
        "     /\\__\\         /\\  \\         /\\  \\         /\\__\\          ___        /\\__\\    ",
        "    /::|  |       /::\\  \\       /::\\  \\       /:/  /         /\\  \\      /::|  |   ",
        "   /:|:|  |      /:/\\:\\  \\     /:/\\:\\  \\     /:/  /          \\:\\  \\    /:|:|  |   ",
        "  /:/|:|  |__   /::\\~\\:\\  \\   /:/  \\:\\  \\   /:/__/  ___      /::\\__\\  /:/|:|__|__ ",
        " /:/ |:| /\\__\\ /:/\\:\\ \\:\\__\\ /:/__/ \\:\\__\\  |:|  | /\\__\\  __/:/\\/__/ /:/ |::::\\__\\",
        " \\/__|:|/:/  / \\:\\~\\:\\ \\/__/ \\:\\  \\ /:/  /  |:|  |/:/  / /\\/:/  /    \\/__/~~/:/  /",
        "     |:/:/  /   \\:\\ \\:\\__\\    \\:\\  /:/  /   |:|__/:/  /  \\::/__/           /:/  / ",
        "     |::/  /     \\:\\ \\/__/     \\:\\/:/  /     \\::::/__/    \\:\\__\\          /:/  /  ",
        "     /:/  /       \\:\\__\\        \\::/  /       ~~~~         \\/__/         /:/  /   ",
        "     \\/__/         \\/__/         \\/__/                                   \\/__/    ",
        "",
        "",
        "",
        "",
    },
    {

        "",
        "",
        "",
        "",
        "      ___           ___           ___                                     ___     ",
        "     /\\  \\         /\\__\\         /\\  \\          ___                      /\\  \\    ",
        "     \\:\\  \\       /:/ _/_       /::\\  \\        /\\  \\        ___         |::\\  \\   ",
        "      \\:\\  \\     /:/ /\\__\\     /:/\\:\\  \\       \\:\\  \\      /\\__\\        |:|:\\  \\  ",
        "  _____\\:\\  \\   /:/ /:/ _/_   /:/  \\:\\  \\       \\:\\  \\    /:/__/      __|:|\\:\\  \\ ",
        " /::::::::\\__\\ /:/_/:/ /\\__\\ /:/__/ \\:\\__\\  ___  \\:\\__\\  /::\\  \\     /::::|_\\:\\__\\",
        " \\:\\~~\\~~\\/__/ \\:\\/:/ /:/  / \\:\\  \\ /:/  / /\\  \\ |:|  |  \\/\\:\\  \\__  \\:\\~~\\  \\/__/",
        "  \\:\\  \\        \\::/_/:/  /   \\:\\  /:/  /  \\:\\  \\|:|  |   ~~\\:\\/\\__\\  \\:\\  \\      ",
        "   \\:\\  \\        \\:\\/:/  /     \\:\\/:/  /    \\:\\__|:|__|      \\::/  /   \\:\\  \\     ",
        "    \\:\\__\\        \\::/  /       \\::/  /      \\::::/__/       /:/  /     \\:\\__\\    ",
        "     \\/__/         \\/__/         \\/__/        ~~~~           \\/__/       \\/__/    ",
        "",
        "",
        "",
        "",
    },
    {
        "",
        "",
        "",
        "",
        "      ___           ___           ___                                    ___     ",
        "     /__/\\         /  /\\         /  /\\          ___        ___          /__/\\    ",
        "     \\  \\:\\       /  /:/_       /  /::\\        /__/\\      /  /\\        |  |::\\   ",
        "      \\  \\:\\     /  /:/ /\\     /  /:/\\:\\       \\  \\:\\    /  /:/        |  |:|:\\  ",
        "  _____\\__\\:\\   /  /:/ /:/_   /  /:/  \\:\\       \\  \\:\\  /__/::\\      __|__|:|\\:\\ ",
        " /__/::::::::\\ /__/:/ /:/ /\\ /__/:/ \\__\\:\\  ___  \\__\\:\\ \\__\\/\\:\\__  /__/::::| \\:\\",
        " \\  \\:\\~~\\~~\\/ \\  \\:\\/:/ /:/ \\  \\:\\ /  /:/ /__/\\ |  |:|    \\  \\:\\/\\ \\  \\:\\~~\\__\\/",
        "  \\  \\:\\  ~~~   \\  \\::/ /:/   \\  \\:\\  /:/  \\  \\:\\|  |:|     \\__\\::/  \\  \\:\\      ",
        "   \\  \\:\\        \\  \\:\\/:/     \\  \\:\\/:/    \\  \\:\\__|:|     /__/:/    \\  \\:\\     ",
        "    \\  \\:\\        \\  \\::/       \\  \\::/      \\__\\::::/      \\__\\/      \\  \\:\\    ",
        "     \\__\\/         \\__\\/         \\__\\/           ~~~~                   \\__\\/    ",
        "",
        "",
        "",
        "",
    },
    {
        "",
        "",
        "",
        "",
        "      ___           ___           ___                                      ___     ",
        "     /  /\\         /  /\\         /  /\\          ___            ___        /  /\\    ",
        "    /  /::|       /  /::\\       /  /::\\        /  /\\          /__/\\      /  /::|   ",
        "   /  /:|:|      /  /:/\\:\\     /  /:/\\:\\      /  /:/          \\__\\:\\    /  /:|:|   ",
        "  /  /:/|:|__   /  /::\\ \\:\\   /  /:/  \\:\\    /  /:/           /  /::\\  /  /:/|:|__ ",
        " /__/:/ |:| /\\ /__/:/\\:\\ \\:\\ /__/:/ \\__\\:\\  /__/:/  ___    __/  /:/\\/ /__/:/_|::::\\",
        " \\__\\/  |:|/:/ \\  \\:\\ \\:\\_\\/ \\  \\:\\ /  /:/  |  |:| /  /\\  /__/\\/:/~~  \\__\\/  /~~/:/",
        "     |  |:/:/   \\  \\:\\ \\:\\    \\  \\:\\  /:/   |  |:|/  /:/  \\  \\::/           /  /:/ ",
        "     |__|::/     \\  \\:\\_\\/     \\  \\:\\/:/    |__|:|__/:/    \\  \\:\\          /  /:/  ",
        "     /__/:/       \\  \\:\\        \\  \\::/      \\__\\::::/      \\__\\/         /__/:/   ",
        "     \\__\\/         \\__\\/         \\__\\/           ~~~~                     \\__\\/    ",
        "",
        "",
        "",
        "",
    },
    {
        "",
        "",
        "",
        "",
        " ,ggg, ,ggggggg,     ,ggggggg,    _,gggggg,_      ,ggg,         ,gg   ,a8a,  ,ggg, ,ggg,_,ggg,  ",
        'dP""Y8,8P"""""Y8b  ,dP""""""Y8b ,d8P""d8P"Y8b,   dP""Y8a       ,8P   ,8" "8,dP""Y8dP""Y88P""Y8b ',
        "Yb, `8dP'     `88  d8'    a  Y8,d8'   Y8   \"8b,dPYb, `88       d8'   d8   8bYb, `88'  `88'  `88 ",
        " `\"  88'       88  88     \"Y8P'd8'    `Ybaaad88P' `\"  88       88    88   88 `\"  88    88    88 ",
        '     88        88  `8baaaa     8P       `""""Y8       88       88    88   88     88    88    88 ',
        '     88        88 ,d8P""""     8b            d8       I8       8I    Y8   8P     88    88    88 ',
        "     88        88 d8\"          Y8,          ,8P       `8,     ,8'    `8, ,8'     88    88    88 ",
        '     88        88 Y8,          `Y8,        ,8P\'        Y8,   ,8P8888  "8,8"      88    88    88 ',
        "     88        Y8,`Yba,,_____,  `Y8b,,__,,d8P'          Yb,_,dP `8b,  ,d8b,      88    88    Y8,",
        '     88        `Y8  `"Y8888888    `"Y8888P"\'             "Y8P"    "Y88P" "Y8     88    88    `Y8',
        "",
        "",
        "",
        "",
    },
}

local buttons = {
    {
        key = "e",
        icon = icons.dashboard.m_tree,
        title = "Open tree",
        command = ":Neotree float<CR>",
    },
    {
        key = "f",
        icon = icons.dashboard.m_find_files,
        title = "Find files",
        command = ":Telescope find_files<CR>",
    },
    {
        key = "w",
        icon = icons.dashboard.m_find_text,
        title = "Find text",
        command = ":Telescope live_grep<CR>",
    },
    {
        key = "l",
        icon = icons.dashboard.m_lazy,
        title = "Lazy",
        command = ":Lazy<CR>",
    },
    {
        key = "m",
        icon = icons.dashboard.m_mason,
        title = "Mason",
        command = ":Mason<CR>",
    },
    {
        key = "q",
        icon = icons.dashboard.m_quit,
        title = "Quit",
        command = ":q<CR>",
    },
}

function M.header()
    local randomIndex = math.random(#headers)

    return headers[randomIndex]
end

function M.buttons()
    return utils.map(buttons, function(b)
        return dashboard.button(b.key, b.icon .. "  " .. icons.dashboard.arrow .. " " .. b.title, b.command)
    end)
end

function M.footer()
    local status = "%s %d  %s %d.%d.%d  %s %s"
    local plugins = #vim.tbl_keys(require("lazy").plugins())
    local v = vim.version()
    local platform = vim.fn.has("win32") == 1 and icons.dashboard.os_win or icons.dashboard.os_nix

    local info = string.format(
        status,
        icons.dashboard.plugins,
        plugins,
        platform,
        v.major,
        v.minor,
        v.patch,
        icons.dashboard.calendar,
        os.date("%d.%m.%Y")
    )

    return { info }
end

return M
